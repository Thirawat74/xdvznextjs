module.exports=[69012,a=>{"use strict";let b=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],69012)},86293,49432,49260,a=>{"use strict";var b=a.i(87924),c=a.i(86304);function d({game:a,onClick:d}){let e=Math.min(...a.items.map(a=>parseFloat(a.price)||0)),f=Math.max(...a.items.map(a=>parseFloat(a.price)||0));return(0,b.jsx)("div",{className:"group relative overflow-hidden border p-3 cursor-pointer rounded-md hover:bg-gray-50 transition-colors",onClick:()=>d(a),children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("img",{src:"/image-product-g.png",className:"w-10 h-10 border p-1 rounded-md shrink-0",alt:a.name}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-medium text-sm line-clamp-2 mb-1",children:a.name}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsxs)(c.Badge,{variant:"outline",className:"text-black rounded-md",children:[a.items.length," แพ็คเกจ"]}),e===f?(0,b.jsxs)(c.Badge,{variant:"secondary",className:"text-xs",children:["฿ ",e.toFixed(2)]}):(0,b.jsxs)(c.Badge,{variant:"secondary",className:"text-xs",children:["฿ ",e.toFixed(2)," - ฿ ",f.toFixed(2)]})]}),a.inputs.length>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ต้องใส่: ",a.inputs.map(a=>a.title).join(", ")]})]})]})})}var e=a.i(72131),f=a.i(99570),g=a.i(66718),h=a.i(70430),i=a.i(80701),j=a.i(14574),k=a.i(5084),l=a.i(23292),m=a.i(56025);function n({game:a,open:d,onOpenChange:n}){let{isAuth:o,user:p}=(0,m.useAuth)(),[q,r]=(0,e.useState)(""),[s,t]=(0,e.useState)({}),[u,v]=(0,e.useState)(!1);(0,e.useEffect)(()=>{a&&d&&(r(""),t({}))},[a,d]);let w=(a,b)=>{t(c=>({...c,[a]:b}))},x=async()=>{if(!o)return void l.toast.error("กรุณาเข้าสู่ระบบก่อนทำการสั่งซื้อ");if(!q)return void l.toast.error("กรุณาเลือกแพ็คเกจ");let b=a?.inputs.filter(a=>!s[a.key]||""===s[a.key].trim());if(b&&b.length>0)return void l.toast.error(`กรุณากรอกข้อมูล: ${b.map(a=>a.title).join(", ")}`);v(!0);try{let b=await fetch("/api/v1/topup/buy",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({product_key:a?.key,item_sku:q,input:s})}),c=await b.json();c.success?(l.toast.success("สั่งซื้อสำเร็จ!"),n(!1)):l.toast.error(c.message||"การสั่งซื้อล้มเหลว")}catch(a){console.error("Purchase error:",a),l.toast.error("เกิดข้อผิดพลาดในการสั่งซื้อ")}finally{v(!1)}},y=a?.items.find(a=>a.sku===q);return a?(0,b.jsx)(j.Dialog,{open:d,onOpenChange:n,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsxs)(j.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("img",{src:"/image-product-g.png",className:"w-6 h-6 rounded",alt:a.name}),a.name]}),(0,b.jsx)(j.DialogDescription,{children:"เลือกแพ็คเกจและกรอกข้อมูลเพื่อทำการเติมเกม"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"เลือกแพ็คเกจ *"}),(0,b.jsxs)(i.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"เลือกแพ็คเกจ"})}),(0,b.jsx)(i.SelectContent,{children:a.items.map(a=>(0,b.jsx)(i.SelectItem,{value:a.sku,children:(0,b.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsxs)(c.Badge,{variant:"secondary",className:"ml-2",children:["฿ ",parseFloat(a.price).toFixed(2)]})]})},a.sku))})]})]}),a.inputs.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:[a.title," ","uid"===a.key?"*":""]}),"select"===a.type&&a.options?(0,b.jsxs)(i.Select,{value:s[a.key]||"",onValueChange:b=>w(a.key,b),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:a.placeholder})}),(0,b.jsx)(i.SelectContent,{children:a.options.map(a=>(0,b.jsx)(i.SelectItem,{value:a.value,children:a.label},a.value))})]}):(0,b.jsx)(g.Input,{type:"number"===a.type?"number":"text",placeholder:a.placeholder,value:s[a.key]||"",onChange:b=>w(a.key,b.target.value),required:"uid"===a.key})]},a.key)),(0,b.jsx)(k.Separator,{}),o&&p&&(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{children:"ยอดคงเหลือ:"}),(0,b.jsxs)("span",{className:"font-medium",children:["฿ ",p.balance?.toFixed(2)||"0.00"]})]}),y&&(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm mt-1",children:[(0,b.jsx)("span",{children:"ราคา:"}),(0,b.jsxs)("span",{className:"font-medium text-red-600",children:["-฿ ",parseFloat(y.price).toFixed(2)]})]})]}),(0,b.jsx)(f.Button,{onClick:x,disabled:!o||u||!q,className:"w-full",children:u?"กำลังดำเนินการ...":o?"เติมเกม":"กรุณาเข้าสู่ระบบ"}),!o&&(0,b.jsx)("p",{className:"text-xs text-center text-muted-foreground",children:"กรุณาเข้าสู่ระบบก่อนทำการสั่งซื้อ"})]})]})}):null}a.s(["TopupGameDialog",()=>n],49432);var o=a.i(68114);function p({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"skeleton",className:(0,o.cn)("bg-accent animate-pulse rounded-md",a),...c})}function q({games:a,loading:c,onGameClick:e,showViewAllButton:f=!1,viewAllHref:g,viewAllText:h}){return c?(0,b.jsx)("div",{className:"p-3",children:(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)("div",{className:"border p-3 rounded-md",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(p,{className:"w-10 h-10 rounded-md"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(p,{className:"h-4 w-3/4"}),(0,b.jsx)(p,{className:"h-3 w-1/2"}),(0,b.jsx)(p,{className:"h-3 w-2/3"})]})]})},c))})}):0===a.length?(0,b.jsx)("div",{className:"p-3 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"ไม่พบเกมที่พร้อมให้บริการ"})}):(0,b.jsx)("div",{className:"p-3",children:(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(a=>(0,b.jsx)(d,{game:a,onClick:e},a.key))})})}a.s(["TopupGameGrid",()=>q],49260),a.s([],86293)},18733,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(86293);var d=a.i(49260),e=a.i(49432),f=a.i(66718),g=a.i(80701),h=a.i(87532),i=a.i(69012),j=a.i(23292);let k=[{value:"all",label:"ทั้งหมด"},{value:"freefire",label:"Free Fire"},{value:"pubg",label:"PUBG Mobile"},{value:"ml",label:"Mobile Legends"},{value:"genshin",label:"Genshin Impact"},{value:"valorant",label:"Valorant"},{value:"lol",label:"League of Legends"},{value:"dota",label:"Dota 2"},{value:"csgo",label:"CS:GO"},{value:"apex",label:"Apex Legends"},{value:"fortnite",label:"Fortnite"},{value:"roblox",label:"Roblox"},{value:"minecraft",label:"Minecraft"},{value:"cod",label:"Call of Duty"},{value:"ragnarok",label:"Ragnarok"},{value:"maple",label:"MapleStory"},{value:"other",label:"อื่นๆ"}];function l(){let[a,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)("all");(0,c.useEffect)(()=>{w()},[]);let w=async()=>{try{let a=await fetch("/api/v1/topup"),b=await a.json();b&&Array.isArray(b)?l(b):j.toast.error("ไม่สามารถโหลดข้อมูลเกมได้")}catch(a){console.error("Error fetching topup games:",a),j.toast.error("เกิดข้อผิดพลาดในการโหลดข้อมูล")}finally{n(!1)}},x=(0,c.useMemo)(()=>{let b=a;return u&&"all"!==u&&(b=b.filter(a=>{let b=a.name.toLowerCase();switch(u){case"freefire":return b.includes("free fire")||b.includes("ff");case"pubg":return b.includes("pubg")||b.includes("battlegrounds");case"ml":return b.includes("mobile legends")||b.includes("ml");case"genshin":return b.includes("genshin");case"valorant":return b.includes("valorant");case"lol":return b.includes("league of legends")||b.includes("lol");case"dota":return b.includes("dota");case"csgo":return b.includes("cs:go")||b.includes("counter strike");case"apex":return b.includes("apex");case"fortnite":return b.includes("fortnite");case"roblox":return b.includes("roblox");case"minecraft":return b.includes("minecraft");case"cod":return b.includes("call of duty")||b.includes("cod");case"ragnarok":return b.includes("ragnarok");case"maple":return b.includes("maple");case"other":return!b.includes("free fire")&&!b.includes("pubg")&&!b.includes("mobile legends")&&!b.includes("genshin")&&!b.includes("valorant")&&!b.includes("league of legends")&&!b.includes("dota")&&!b.includes("cs:go")&&!b.includes("apex")&&!b.includes("fortnite")&&!b.includes("roblox")&&!b.includes("minecraft")&&!b.includes("call of duty")&&!b.includes("ragnarok")&&!b.includes("maple");default:return!0}})),s.trim()&&(b=b.filter(a=>a.name.toLowerCase().includes(s.toLowerCase()))),b},[a,u,s]);return(0,b.jsxs)("main",{className:"min-h-screen",children:[(0,b.jsx)("section",{className:"flex justify-center border-b",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl border-x",children:[(0,b.jsxs)("div",{className:"p-3 border-b",children:[(0,b.jsx)("h3",{className:"text-base font-medium",children:"เติมเกม"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"บริการเติมเกมทั้งหมด"})]}),(0,b.jsx)("div",{className:"p-3 border-b",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(f.Input,{placeholder:"ค้นหาเกม...",value:s,onChange:a=>t(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsxs)(g.Select,{value:u,onValueChange:v,children:[(0,b.jsx)(g.SelectTrigger,{className:"w-full sm:w-48 pl-10",children:(0,b.jsx)(g.SelectValue,{placeholder:"เลือกประเภทเกม"})}),(0,b.jsx)(g.SelectContent,{className:"max-h-[300px] overflow-y-auto",children:k.map(a=>(0,b.jsx)(g.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]})}),(0,b.jsx)(d.TopupGameGrid,{games:x,loading:m,onGameClick:a=>{p(a),r(!0)},showViewAllButton:!1})]})}),(0,b.jsx)(e.TopupGameDialog,{game:o,open:q,onOpenChange:r})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_d15d2855._.js.map