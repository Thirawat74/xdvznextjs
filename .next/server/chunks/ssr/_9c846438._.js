module.exports=[69012,a=>{"use strict";let b=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],69012)},42736,70109,74579,a=>{"use strict";var b=a.i(87924),c=a.i(86304),d=a.i(56025),e=a.i(23292);function f({service:a,onClick:e}){let f,{isAuth:g}=(0,d.useAuth)();return(0,b.jsxs)("div",{className:"border rounded-md relative flex cursor-pointer items-start gap-2 p-3 hover:bg-gray-50 transition-colors",onClick:()=>e(a),children:[(0,b.jsx)("div",{children:(0,b.jsx)("img",{src:(f=a.category.toLowerCase()).includes("instagram")?"/icons/instagram.png":f.includes("facebook")?"/icons/facebook.png":f.includes("tiktok")?"/icons/tiktok.png":f.includes("twitter")?"/icons/twitter.png":f.includes("youtube")?"/icons/youtube.png":f.includes("linkedin")?"/icons/LinkedIn.png":f.includes("telegram")?"/icons/telegram.png":"/icons/shopee.png",className:"w-12 h-12 border p-1 rounded-md",alt:a.category,onError:a=>{a.target.src="/icons/shopee.png"}})}),(0,b.jsxs)("div",{className:"flex-1 py-1",children:[(0,b.jsx)("h5",{className:"text-sm font-medium line-clamp-2 mb-1",children:a.name}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsxs)(c.Badge,{variant:"outline",className:"text-black rounded-md text-xs",children:["฿ ",parseFloat(a.rate).toFixed(2)," ต่อ 1,000"]}),(0,b.jsxs)("span",{children:["ขั้นต่ำ ",a.min]}),(0,b.jsxs)("span",{children:["สูงสุด ",a.max]}),a.refill&&(0,b.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"Refill"}),a.cancel&&(0,b.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:"Cancel"})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ประเภท: ",a.type]})]}),(0,b.jsx)("div",{className:"absolute top-2 right-2",children:(0,b.jsx)(c.Badge,{variant:"secondary",children:a.category})})]},a.service)}var g=a.i(72131),h=a.i(99570),i=a.i(66718),j=a.i(70430),k=a.i(14574),l=a.i(5084);function m({service:a,open:f,onOpenChange:m}){let n,{user:o,isAuth:p}=(0,d.useAuth)(),[q,r]=(0,g.useState)(!1),[s,t]=(0,g.useState)({link:"",quantity:"",runs:"",interval:""});g.default.useEffect(()=>{f&&!p&&(m(!1),e.toast.error("กรุณาเข้าสู่ระบบก่อนสั่งซื้อบริการ"))},[f,p,m]);let u=()=>{m(!1),t({link:"",quantity:"",runs:"",interval:""})},v=async()=>{if(!a)return;if(!s.link.trim())return void e.toast.error("กรุณาป้อนลิงก์");if(!s.quantity||parseInt(s.quantity)<parseInt(a.min))return void e.toast.error(`จำนวนขั้นต่ำคือ ${a.min}`);if(parseInt(s.quantity)>parseInt(a.max))return void e.toast.error(`จำนวนสูงสุดคือ ${a.max}`);let b=parseInt(s.quantity),c=parseFloat(a.rate);if((o?.balance||0)<c*b/1e3)return void e.toast.error("ยอดเงินคงเหลือไม่เพียงพอ");r(!0);try{let c=await fetch("/api/v1/social/buy",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({service:a.service,link:s.link.trim(),quantity:b,runs:s.runs?parseInt(s.runs):void 0,interval:s.interval?parseInt(s.interval):void 0})}),d=await c.json();d.success?(e.toast.success("สั่งซื้อสำเร็จ!"),d.data?.user?.balance,u()):e.toast.error(d.message||"การสั่งซื้อล้มเหลว")}catch(a){console.error("Purchase error:",a),e.toast.error("เกิดข้อผิดพลาดในการสั่งซื้อ")}finally{r(!1)}};if(!a||!p)return null;let w=(()=>{if(!a||!s.quantity)return 0;let b=parseInt(s.quantity)||0;return(parseFloat(a.rate)||0)*b/1e3})(),x=o?.balance||0,y=x>=w;return(0,b.jsx)(k.Dialog,{open:f,onOpenChange:u,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsxs)(k.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("img",{src:(n=a.category.toLowerCase()).includes("instagram")?"/icons/instagram.png":n.includes("facebook")?"/icons/facebook.png":n.includes("tiktok")?"/icons/tiktok.png":n.includes("twitter")?"/icons/twitter.png":n.includes("youtube")?"/icons/youtube.png":n.includes("linkedin")?"/icons/LinkedIn.png":n.includes("telegram")?"/icons/telegram.png":"/icons/shopee.png",className:"w-6 h-6 border rounded",alt:a.category,onError:a=>{a.target.src="/icons/shopee.png"}}),"สั่งซื้อบริการ"]}),(0,b.jsx)(k.DialogDescription,{children:a.name})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"ราคาต่อ 1,000"}),(0,b.jsxs)("span",{className:"text-sm font-bold",children:["฿",parseFloat(a.rate).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"ขั้นต่ำ"}),(0,b.jsx)("span",{className:"text-sm",children:a.min})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"สูงสุด"}),(0,b.jsx)("span",{className:"text-sm",children:a.max})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[a.refill&&(0,b.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"Refill"}),a.cancel&&(0,b.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:"Cancel"})]})]}),(0,b.jsx)(l.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"link",children:"ลิงก์ *"}),(0,b.jsx)(i.Input,{id:"link",type:"url",placeholder:"https://...",value:s.link,onChange:a=>t(b=>({...b,link:a.target.value})),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"quantity",children:"จำนวน *"}),(0,b.jsx)(i.Input,{id:"quantity",type:"number",placeholder:`ขั้นต่ำ ${a.min}`,min:a.min,max:a.max,value:s.quantity,onChange:a=>t(b=>({...b,quantity:a.target.value})),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"runs",children:"Runs (ไม่บังคับ)"}),(0,b.jsx)(i.Input,{id:"runs",type:"number",placeholder:"1",min:"1",value:s.runs,onChange:a=>t(b=>({...b,runs:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"interval",children:"Interval (ไม่บังคับ)"}),(0,b.jsx)(i.Input,{id:"interval",type:"number",placeholder:"นาที",min:"1",value:s.interval,onChange:a=>t(b=>({...b,interval:a.target.value}))})]})]})]}),s.quantity&&(0,b.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"ราคารวม"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["฿",w.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"ยอดคงเหลือหลังสั่งซื้อ"}),(0,b.jsxs)("span",{className:`text-xs font-medium ${y?"text-green-600":"text-red-600"}`,children:["฿",(x-w).toFixed(2)]})]})]}),!y&&w>0&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-red-700",children:["ยอดเงินคงเหลือไม่เพียงพอ (คงเหลือ: ฿",x.toFixed(2),")"]})})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:u,disabled:q,children:"ยกเลิก"}),(0,b.jsx)(h.Button,{onClick:v,disabled:q||!y||!s.link||!s.quantity,children:q?"กำลังสั่งซื้อ...":"สั่งซื้อ"})]})]})})}a.s(["SocialServiceDialog",()=>m],70109);var n=a.i(83497),o=a.i(38246);function p({services:a,loading:c,onServiceClick:d,showViewAllButton:e=!0,viewAllHref:g="/social",viewAllText:i="ดูทั้งหมด"}){return(0,b.jsx)("div",{className:"space-y-3 p-2",children:c?Array.from({length:8}).map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-md relative flex cursor-pointer items-start gap-2 p-3 animate-pulse",children:[(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-md"})}),(0,b.jsxs)("div",{className:"flex-1 py-1 space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-12"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-14"})]})]}),(0,b.jsx)("div",{className:"absolute top-2 right-2",children:(0,b.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16"})})]},c)):a.length>0?(0,b.jsxs)(b.Fragment,{children:[a.map(a=>(0,b.jsx)(f,{service:a,onClick:d},a.service)),e&&(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(o.default,{href:g,children:(0,b.jsx)(h.Button,{variant:"default",className:"w-full",children:i})})})]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(n.Package,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),(0,b.jsx)("p",{className:"text-gray-500",children:"ไม่พบข้อมูลบริการ"})]})})}a.s(["SocialServiceGrid",()=>p],74579),a.s([],42736)},33876,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(42736);var d=a.i(74579),e=a.i(70109),f=a.i(66718),g=a.i(80701),h=a.i(87532),i=a.i(69012),j=a.i(23292),k=a.i(99570);let l=[{value:"all",label:"ทั้งหมด"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"tiktok",label:"TikTok"},{value:"twitter",label:"Twitter"},{value:"youtube",label:"YouTube"},{value:"linkedin",label:"LinkedIn"},{value:"telegram",label:"Telegram"},{value:"other",label:"อื่นๆ"}];function m(){let[a,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)(50),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{B()},[]);let B=async()=>{try{let a=await fetch("/api/v1/social"),b=await a.json();b.success?m(b.services):j.toast.error("ไม่สามารถโหลดข้อมูลบริการได้")}catch(a){console.error("Error fetching social services:",a),j.toast.error("เกิดข้อผิดพลาดในการโหลดข้อมูล")}finally{o(!1)}},C=(0,c.useMemo)(()=>{let b=a;return v&&"all"!==v&&(b=b.filter(a=>{let b=a.category.toLowerCase();switch(v){case"instagram":return b.includes("instagram");case"facebook":return b.includes("facebook");case"tiktok":return b.includes("tiktok");case"twitter":return b.includes("twitter")||b.includes("x");case"youtube":return b.includes("youtube");case"linkedin":return b.includes("linkedin");case"telegram":return b.includes("telegram");case"other":return!b.includes("instagram")&&!b.includes("facebook")&&!b.includes("tiktok")&&!b.includes("twitter")&&!b.includes("youtube")&&!b.includes("linkedin")&&!b.includes("telegram");default:return!0}})),t.trim()&&(b=b.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.category.toLowerCase().includes(t.toLowerCase()))),b},[a,v,t]),D=(0,c.useMemo)(()=>z?C:C.slice(0,x),[C,x,z]),E=()=>{A(!1),y(50)};return(0,c.useEffect)(()=>{E()},[v,t]),(0,b.jsxs)("main",{className:"min-h-screen",children:[(0,b.jsx)("section",{className:"flex justify-center border-b",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl border-x",children:[(0,b.jsxs)("div",{className:"p-3 border-b",children:[(0,b.jsx)("h3",{className:"text-base font-medium",children:"บริการปั้มโซเชียลมีเดีย"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"บริการปั้มโซเชียลมีเดียทั้งหมด"})]}),(0,b.jsx)("div",{className:"p-3 border-b",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(f.Input,{placeholder:"ค้นหาบริการ...",value:t,onChange:a=>u(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsxs)(g.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(g.SelectTrigger,{className:"w-full sm:w-48 pl-10",children:(0,b.jsx)(g.SelectValue,{placeholder:"เลือกประเภท"})}),(0,b.jsx)(g.SelectContent,{className:"max-h-[300px] overflow-y-auto",children:l.map(a=>(0,b.jsx)(g.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]})}),!n&&(0,b.jsx)("div",{className:"px-3 pb-2",children:(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["แสดง ",D.length," จาก ",C.length," บริการ","all"!==v&&` ในหมวดหมู่ ${l.find(a=>a.value===v)?.label}`,t&&` ค้นหา "${t}"`]})}),(0,b.jsx)(d.SocialServiceGrid,{services:D,loading:n,onServiceClick:a=>{q(a),s(!0)},showViewAllButton:!1}),!n&&C.length>0&&(0,b.jsx)("div",{className:"p-3 border-t",children:(0,b.jsxs)("div",{className:"flex gap-2 justify-center",children:[!z&&D.length<C.length&&(0,b.jsx)(k.Button,{className:"cursor-pointer",variant:"outline",onClick:()=>{y(a=>a+50)},children:"แสดงเพิ่มเติม (+50)"}),!z&&C.length>50&&(0,b.jsxs)(k.Button,{className:"cursor-pointer",variant:"secondary",onClick:()=>{A(!0)},children:["แสดงทั้งหมด (",C.length,")"]}),z&&(0,b.jsx)(k.Button,{className:"cursor-pointer",variant:"secondary",onClick:E,children:"แสดงน้อยลง"})]})})]})}),(0,b.jsx)(e.SocialServiceDialog,{service:p,open:r,onOpenChange:s})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=_9c846438._.js.map